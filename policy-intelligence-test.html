<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Policy Intelligence Center - Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            min-height: 100vh;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        /* Glassmorphism */
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
        }

        .glass-dark {
            background: rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Citation colors by jurisdiction */
        .citation-federal {
            color: #8b5cf6;
            font-weight: 600;
            cursor: pointer;
            text-decoration: underline;
        }

        .citation-federal:hover {
            color: #a78bfa;
        }

        .citation-state {
            color: #10b981;
            font-weight: 600;
            cursor: pointer;
            text-decoration: underline;
        }

        .citation-state:hover {
            color: #34d399;
        }

        .citation-municipal {
            color: #3b82f6;
            font-weight: 600;
            cursor: pointer;
            text-decoration: underline;
        }

        .citation-municipal:hover {
            color: #60a5fa;
        }

        /* Confidence meter */
        .confidence-meter {
            height: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            overflow: hidden;
            position: relative;
        }

        .confidence-fill {
            height: 100%;
            border-radius: 6px;
            transition: width 1.5s ease;
            position: relative;
            overflow: hidden;
        }

        .confidence-high {
            background: linear-gradient(90deg, #10b981, #34d399);
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.6);
        }

        .confidence-medium {
            background: linear-gradient(90deg, #f59e0b, #fbbf24);
            box-shadow: 0 0 20px rgba(245, 158, 11, 0.6);
        }

        .confidence-low {
            background: linear-gradient(90deg, #ef4444, #f87171);
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.6);
        }

        /* Status badges */
        .status-compliant {
            background: rgba(16, 185, 129, 0.2);
            border: 1px solid rgba(16, 185, 129, 0.4);
            color: #34d399;
        }

        .status-needs-review {
            background: rgba(245, 158, 11, 0.2);
            border: 1px solid rgba(245, 158, 11, 0.4);
            color: #fbbf24;
        }

        .status-non-compliant {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.4);
            color: #f87171;
        }

        .status-unclear {
            background: rgba(139, 92, 246, 0.2);
            border: 1px solid rgba(139, 92, 246, 0.4);
            color: #a78bfa;
        }

        /* Conflict severity */
        .conflict-critical {
            border-left: 4px solid #ef4444;
            background: rgba(239, 68, 68, 0.1);
        }

        .conflict-moderate {
            border-left: 4px solid #f59e0b;
            background: rgba(245, 158, 11, 0.1);
        }

        .conflict-minor {
            border-left: 4px solid #10b981;
            background: rgba(16, 185, 129, 0.1);
        }

        /* Animations */
        @keyframes pulse-glow {
            0%, 100% {
                box-shadow: 0 0 15px rgba(59, 130, 246, 0.4);
            }
            50% {
                box-shadow: 0 0 30px rgba(59, 130, 246, 0.8);
            }
        }

        .pulse-glow {
            animation: pulse-glow 2s infinite;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease;
        }

        /* Table styles */
        .policy-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
        }

        .policy-table th {
            background: rgba(59, 130, 246, 0.2);
            color: white;
            font-weight: 600;
            padding: 12px;
            text-align: left;
            border-bottom: 2px solid rgba(59, 130, 246, 0.4);
        }

        .policy-table td {
            padding: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.9);
        }

        .policy-table tr:hover {
            background: rgba(59, 130, 246, 0.1);
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(59, 130, 246, 0.5);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(59, 130, 246, 0.7);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        /* Tooltip */
        .tooltip-text {
            visibility: hidden;
            position: absolute;
            background: rgba(0, 0, 0, 0.95);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.875rem;
            white-space: nowrap;
            z-index: 100;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .tooltip-container:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        .tooltip-text::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: rgba(0, 0, 0, 0.95) transparent transparent transparent;
        }
    </style>
</head>
<body class="p-6">
    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <div class="glass p-6 mb-6 pulse-glow">
            <div class="flex items-center justify-between mb-4">
                <div>
                    <h1 class="text-3xl font-bold text-white mb-2">
                        <i class="fas fa-brain text-purple-400 mr-3"></i>
                        AI-Powered Policy Intelligence Center
                    </h1>
                    <p class="text-white/70">Natural language policy analysis, compliance checking, and regulatory intelligence</p>
                </div>
                <div class="hidden md:block">
                    <div class="flex items-center space-x-3">
                        <span class="px-3 py-1 rounded-full bg-green-500/20 text-green-300 text-sm border border-green-500/40">
                            <i class="fas fa-circle text-green-400 mr-1 text-xs"></i> Active
                        </span>
                    </div>
                </div>
            </div>

            <!-- Status Indicators -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
                <div class="glass-dark p-4 rounded-lg">
                    <div class="text-white/60 text-xs mb-1">Policy Database</div>
                    <div class="text-white text-2xl font-bold">28,547</div>
                    <div class="text-white/50 text-xs">regulations indexed</div>
                </div>
                <div class="glass-dark p-4 rounded-lg">
                    <div class="text-white/60 text-xs mb-1">Last Updated</div>
                    <div class="text-white text-2xl font-bold">Today</div>
                    <div class="text-white/50 text-xs">${new Date().toLocaleTimeString()}</div>
                </div>
                <div class="glass-dark p-4 rounded-lg">
                    <div class="text-white/60 text-xs mb-1">AI Confidence</div>
                    <div class="text-green-400 text-2xl font-bold">94.2%</div>
                    <div class="text-white/50 text-xs">average accuracy</div>
                </div>
                <div class="glass-dark p-4 rounded-lg">
                    <div class="text-white/60 text-xs mb-1">Queries Today</div>
                    <div class="text-white text-2xl font-bold">1,247</div>
                    <div class="text-white/50 text-xs">+18% vs yesterday</div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="flex flex-wrap gap-2">
                <button onclick="showNewAnalysis()" class="px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-semibold transition-all">
                    <i class="fas fa-plus mr-2"></i>New Analysis
                </button>
                <button onclick="showPolicySearch()" class="px-4 py-2 rounded-lg bg-purple-600 hover:bg-purple-700 text-white font-semibold transition-all">
                    <i class="fas fa-search mr-2"></i>Policy Search
                </button>
                <button onclick="showConflictScan()" class="px-4 py-2 rounded-lg bg-yellow-600 hover:bg-yellow-700 text-white font-semibold transition-all">
                    <i class="fas fa-exclamation-triangle mr-2"></i>Conflict Scan
                </button>
                <button onclick="exportReport()" class="px-4 py-2 rounded-lg bg-green-600 hover:bg-green-700 text-white font-semibold transition-all">
                    <i class="fas fa-file-export mr-2"></i>Export Report
                </button>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
            <!-- Natural Language Query Interface -->
            <div class="glass p-6">
                <h2 class="text-xl font-bold text-white mb-4 flex items-center">
                    <i class="fas fa-comments text-blue-400 mr-2"></i>
                    Natural Language Query
                </h2>

                <div class="mb-4">
                    <div class="flex gap-2 mb-3">
                        <input
                            type="text"
                            id="policyQuery"
                            class="flex-1 px-4 py-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/50 focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/50"
                            placeholder="Ask: 'Does this policy comply with ADA requirements?' or 'Find all regulations about building heights'"
                            onkeypress="if(event.key==='Enter') analyzePolicy()"
                        >
                        <button onclick="toggleVoiceInput()" class="px-4 py-3 rounded-lg bg-red-500/20 border border-red-500/40 text-red-400 hover:bg-red-500/30 transition-all" title="Voice input">
                            <i class="fas fa-microphone"></i>
                        </button>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-3">
                        <select id="queryType" class="px-4 py-2 rounded-lg bg-white/10 border border-white/20 text-white focus:outline-none focus:border-purple-500">
                            <option value="general">General Inquiry</option>
                            <option value="compliance">Compliance Check</option>
                            <option value="conflict">Conflict Detection</option>
                            <option value="citation">Citation Search</option>
                            <option value="drafting">Policy Drafting</option>
                        </select>

                        <select id="department" class="px-4 py-2 rounded-lg bg-white/10 border border-white/20 text-white focus:outline-none focus:border-purple-500">
                            <option value="">All Departments</option>
                            <option value="building">Building & Safety</option>
                            <option value="planning">Planning & Zoning</option>
                            <option value="health">Public Health</option>
                            <option value="hr">Human Resources</option>
                            <option value="finance">Finance</option>
                        </select>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-3 mb-4">
                        <select id="regLevel" class="px-4 py-2 rounded-lg bg-white/10 border border-white/20 text-white focus:outline-none focus:border-purple-500">
                            <option value="">All Levels</option>
                            <option value="federal">Federal</option>
                            <option value="state">State</option>
                            <option value="municipal">Municipal</option>
                        </select>

                        <select id="policyCategory" class="px-4 py-2 rounded-lg bg-white/10 border border-white/20 text-white focus:outline-none focus:border-purple-500">
                            <option value="">All Categories</option>
                            <option value="accessibility">Accessibility</option>
                            <option value="safety">Safety</option>
                            <option value="zoning">Zoning</option>
                            <option value="employment">Employment</option>
                            <option value="environmental">Environmental</option>
                        </select>

                        <input type="date" id="dateFilter" class="px-4 py-2 rounded-lg bg-white/10 border border-white/20 text-white focus:outline-none focus:border-purple-500">
                    </div>

                    <button onclick="analyzePolicy()" class="w-full px-6 py-3 rounded-lg bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold hover:shadow-lg hover:shadow-blue-500/50 transition-all">
                        <i class="fas fa-search-plus mr-2"></i>Analyze Policy
                    </button>
                </div>

                <!-- Recent Queries -->
                <div class="glass-dark p-4 rounded-lg">
                    <h3 class="text-white font-semibold mb-3 text-sm">Recent Queries</h3>
                    <div class="space-y-2" id="recentQueries">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- AI Analysis Response Panel -->
            <div class="glass p-6" id="analysisPanel" style="display: none;">
                <h2 class="text-xl font-bold text-white mb-4 flex items-center justify-between">
                    <span>
                        <i class="fas fa-brain text-purple-400 mr-2"></i>
                        AI Analysis
                    </span>
                    <button onclick="closeAnalysis()" class="text-white/60 hover:text-white">
                        <i class="fas fa-times"></i>
                    </button>
                </h2>

                <div id="analysisContent">
                    <!-- Content populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Policy Conflict Detector -->
        <div class="glass p-6 mb-6" id="conflictDetector" style="display: none;">
            <h2 class="text-xl font-bold text-white mb-4">
                <i class="fas fa-exclamation-triangle text-yellow-400 mr-2"></i>
                Policy Conflict Detector
            </h2>
            <div id="conflictContent">
                <!-- Content populated by JavaScript -->
            </div>
        </div>

        <!-- Regulatory Database Browser -->
        <div class="glass p-6 mb-6">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-xl font-bold text-white">
                    <i class="fas fa-database text-blue-400 mr-2"></i>
                    Regulatory Database
                </h2>
                <div class="flex gap-2">
                    <input
                        type="text"
                        id="tableSearch"
                        placeholder="Search policies..."
                        class="px-3 py-2 rounded-lg bg-white/10 border border-white/20 text-white text-sm placeholder-white/50 focus:outline-none focus:border-purple-500"
                        oninput="filterTable()"
                    >
                    <select id="tableFilter" onchange="filterTable()" class="px-3 py-2 rounded-lg bg-white/10 border border-white/20 text-white text-sm focus:outline-none focus:border-purple-500">
                        <option value="">All Jurisdictions</option>
                        <option value="Federal">Federal</option>
                        <option value="State">State</option>
                        <option value="Municipal">Municipal</option>
                    </select>
                </div>
            </div>

            <div class="overflow-x-auto">
                <table class="policy-table" id="policyTable">
                    <thead>
                        <tr>
                            <th>Policy Title</th>
                            <th>Jurisdiction</th>
                            <th>Department</th>
                            <th>Effective Date</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="policyTableBody">
                        <!-- Populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Analytics Dashboard -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            <div class="glass p-6">
                <h3 class="text-white font-semibold mb-3">Top Searched Policies</h3>
                <div class="space-y-2">
                    <div class="flex justify-between items-center">
                        <span class="text-white/80 text-sm">ADA Compliance</span>
                        <span class="text-blue-400 font-semibold">847</span>
                    </div>
                    <div class="w-full bg-white/10 rounded-full h-2">
                        <div class="bg-blue-500 h-2 rounded-full" style="width: 85%"></div>
                    </div>

                    <div class="flex justify-between items-center">
                        <span class="text-white/80 text-sm">Building Heights</span>
                        <span class="text-blue-400 font-semibold">632</span>
                    </div>
                    <div class="w-full bg-white/10 rounded-full h-2">
                        <div class="bg-blue-500 h-2 rounded-full" style="width: 64%"></div>
                    </div>

                    <div class="flex justify-between items-center">
                        <span class="text-white/80 text-sm">Parking Requirements</span>
                        <span class="text-blue-400 font-semibold">521</span>
                    </div>
                    <div class="w-full bg-white/10 rounded-full h-2">
                        <div class="bg-blue-500 h-2 rounded-full" style="width: 52%"></div>
                    </div>
                </div>
            </div>

            <div class="glass p-6">
                <h3 class="text-white font-semibold mb-3">Compliance Score</h3>
                <div class="text-center">
                    <div class="text-5xl font-bold text-green-400 mb-2">92%</div>
                    <div class="text-white/60 text-sm mb-4">Overall Compliance</div>
                    <div class="confidence-meter">
                        <div class="confidence-fill confidence-high" style="width: 92%"></div>
                    </div>
                    <div class="text-white/50 text-xs mt-2">+3% from last month</div>
                </div>
            </div>

            <div class="glass p-6">
                <h3 class="text-white font-semibold mb-3">Recent Changes</h3>
                <div class="space-y-3">
                    <div class="flex items-start">
                        <div class="w-2 h-2 rounded-full bg-green-400 mt-2 mr-3"></div>
                        <div>
                            <div class="text-white/90 text-sm">Zoning §12.34 Updated</div>
                            <div class="text-white/50 text-xs">2 days ago</div>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <div class="w-2 h-2 rounded-full bg-blue-400 mt-2 mr-3"></div>
                        <div>
                            <div class="text-white/90 text-sm">New OSHA Standard</div>
                            <div class="text-white/50 text-xs">1 week ago</div>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <div class="w-2 h-2 rounded-full bg-purple-400 mt-2 mr-3"></div>
                        <div>
                            <div class="text-white/90 text-sm">ADA Guidelines Revised</div>
                            <div class="text-white/50 text-xs">2 weeks ago</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="glass p-6">
                <h3 class="text-white font-semibold mb-3">Query Activity</h3>
                <div class="space-y-2">
                    <div class="flex justify-between">
                        <span class="text-white/70 text-sm">Building & Safety</span>
                        <span class="text-white font-semibold">42%</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-white/70 text-sm">Planning & Zoning</span>
                        <span class="text-white font-semibold">28%</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-white/70 text-sm">Public Health</span>
                        <span class="text-white font-semibold">18%</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-white/70 text-sm">Human Resources</span>
                        <span class="text-white font-semibold">12%</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Citation Modal -->
    <div id="citationModal" class="modal" onclick="if(event.target === this) closeCitationModal()">
        <div class="glass p-8 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-white">Policy Citation</h2>
                <button onclick="closeCitationModal()" class="text-white/70 hover:text-white">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <div id="citationContent">
                <!-- Content populated by JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // Added 2025-10-07: Policy Intelligence Center
        // MOCK DATA - Replace in production
        // TODO: Connect to legal database API
        // TODO: Implement real NLP model for policy analysis
        // TODO: Add authentication for legal team access only
        // TODO: Integrate with document management system

        // Mock Policy Database
        const policyDatabase = [
            // Federal Regulations
            { id: 1, title: 'Americans with Disabilities Act (ADA) - Title II Public Services', jurisdiction: 'Federal', department: 'Civil Rights', effectiveDate: '1990-07-26', lastAmended: '2010-03-15', status: 'Active', citation: '42 U.S.C. § 12101', category: 'accessibility' },
            { id: 2, title: 'Occupational Safety and Health Act (OSHA) - Workplace Safety Standards', jurisdiction: 'Federal', department: 'Labor', effectiveDate: '1970-12-29', lastAmended: '2023-01-15', status: 'Active', citation: '29 CFR § 1910', category: 'safety' },
            { id: 3, title: 'Fair Labor Standards Act (FLSA) - Wage and Hour Division', jurisdiction: 'Federal', department: 'Labor', effectiveDate: '1938-06-25', lastAmended: '2024-01-01', status: 'Active', citation: '29 U.S.C. § 201', category: 'employment' },
            { id: 4, title: 'Family and Medical Leave Act (FMLA) - Employee Leave Requirements', jurisdiction: 'Federal', department: 'Labor', effectiveDate: '1993-02-05', lastAmended: '2023-08-12', status: 'Active', citation: '29 U.S.C. § 2601', category: 'employment' },
            { id: 5, title: 'Clean Air Act (CAA) - EPA Emissions Standards', jurisdiction: 'Federal', department: 'EPA', effectiveDate: '1963-12-17', lastAmended: '2023-06-20', status: 'Active', citation: '42 U.S.C. § 7401', category: 'environmental' },
            { id: 6, title: 'Clean Water Act (CWA) - Water Quality Regulations', jurisdiction: 'Federal', department: 'EPA', effectiveDate: '1972-10-18', lastAmended: '2024-03-10', status: 'Active', citation: '33 U.S.C. § 1251', category: 'environmental' },
            { id: 7, title: 'Resource Conservation and Recovery Act (RCRA) - Waste Management', jurisdiction: 'Federal', department: 'EPA', effectiveDate: '1976-10-21', lastAmended: '2023-11-05', status: 'Active', citation: '42 U.S.C. § 6901', category: 'environmental' },
            { id: 8, title: 'National Environmental Policy Act (NEPA) - Environmental Reviews', jurisdiction: 'Federal', department: 'EPA', effectiveDate: '1970-01-01', lastAmended: '2023-04-25', status: 'Active', citation: '42 U.S.C. § 4321', category: 'environmental' },
            { id: 9, title: 'Federal Acquisition Regulation (FAR) - Government Procurement', jurisdiction: 'Federal', department: 'GSA', effectiveDate: '1984-04-01', lastAmended: '2024-01-15', status: 'Active', citation: '48 CFR Chapter 1', category: 'procurement' },
            { id: 10, title: 'Privacy Act - Personal Information Protection', jurisdiction: 'Federal', department: 'Justice', effectiveDate: '1974-12-31', lastAmended: '2023-09-18', status: 'Active', citation: '5 U.S.C. § 552a', category: 'privacy' },
            { id: 11, title: 'Freedom of Information Act (FOIA) - Public Records Access', jurisdiction: 'Federal', department: 'Justice', effectiveDate: '1967-07-04', lastAmended: '2023-12-08', status: 'Active', citation: '5 U.S.C. § 552', category: 'transparency' },
            { id: 12, title: 'Equal Employment Opportunity (EEO) - Non-Discrimination', jurisdiction: 'Federal', department: 'EEOC', effectiveDate: '1964-07-02', lastAmended: '2023-07-22', status: 'Active', citation: '42 U.S.C. § 2000e', category: 'employment' },
            { id: 13, title: 'Uniformed Services Employment and Reemployment Rights Act (USERRA)', jurisdiction: 'Federal', department: 'Labor', effectiveDate: '1994-10-13', lastAmended: '2023-05-14', status: 'Active', citation: '38 U.S.C. § 4301', category: 'employment' },
            { id: 14, title: 'Section 508 - Electronic Accessibility Requirements', jurisdiction: 'Federal', department: 'GSA', effectiveDate: '1998-08-07', lastAmended: '2023-10-30', status: 'Active', citation: '29 U.S.C. § 794d', category: 'accessibility' },
            { id: 15, title: 'Davis-Bacon Act - Prevailing Wage Requirements', jurisdiction: 'Federal', department: 'Labor', effectiveDate: '1931-03-03', lastAmended: '2024-02-01', status: 'Active', citation: '40 U.S.C. § 3141', category: 'employment' },

            // State Regulations
            { id: 16, title: 'State Building Code - Chapter 34: Structural Standards', jurisdiction: 'State', department: 'Building', effectiveDate: '2015-01-01', lastAmended: '2024-01-01', status: 'Active', citation: 'SBC Ch. 34', category: 'safety' },
            { id: 17, title: 'Environmental Quality Act - Section 15: Impact Assessments', jurisdiction: 'State', department: 'Environment', effectiveDate: '1970-01-01', lastAmended: '2023-06-15', status: 'Active', citation: 'EQA § 15', category: 'environmental' },
            { id: 18, title: 'Public Records Law - Chapter 66: Document Retention', jurisdiction: 'State', department: 'Secretary of State', effectiveDate: '1963-01-01', lastAmended: '2023-09-01', status: 'Active', citation: 'PRL Ch. 66', category: 'transparency' },
            { id: 19, title: 'Civil Service Law - Article 5: Personnel Management', jurisdiction: 'State', department: 'HR', effectiveDate: '1884-05-04', lastAmended: '2023-12-20', status: 'Active', citation: 'CSL Art. 5', category: 'employment' },
            { id: 20, title: 'Workers Compensation Law - Title 2: Injury Claims', jurisdiction: 'State', department: 'Labor', effectiveDate: '1914-07-01', lastAmended: '2024-01-01', status: 'Active', citation: 'WCL Title 2', category: 'employment' },
            { id: 21, title: 'State Fire Code - Chapter 9: Fire Safety Requirements', jurisdiction: 'State', department: 'Fire Marshal', effectiveDate: '1975-01-01', lastAmended: '2023-11-10', status: 'Active', citation: 'SFC Ch. 9', category: 'safety' },
            { id: 22, title: 'Zoning Enabling Act - Article 7: Land Use Planning', jurisdiction: 'State', department: 'Planning', effectiveDate: '1926-01-01', lastAmended: '2023-08-25', status: 'Active', citation: 'ZEA Art. 7', category: 'zoning' },
            { id: 23, title: 'Public Health Law - Title 4: Health and Safety Standards', jurisdiction: 'State', department: 'Health', effectiveDate: '1909-01-01', lastAmended: '2024-02-15', status: 'Active', citation: 'PHL Title 4', category: 'safety' },
            { id: 24, title: 'Motor Vehicle Code - Chapter 90: Traffic Regulations', jurisdiction: 'State', department: 'Transportation', effectiveDate: '1903-01-01', lastAmended: '2023-10-05', status: 'Active', citation: 'MVC Ch. 90', category: 'safety' },
            { id: 25, title: 'Open Meeting Law - Chapter 30A: Public Access to Government', jurisdiction: 'State', department: 'Attorney General', effectiveDate: '1975-07-01', lastAmended: '2023-07-30', status: 'Active', citation: 'OML Ch. 30A', category: 'transparency' },

            // Municipal Codes
            { id: 26, title: 'Zoning Ordinance §12.34 - Residential Height Restrictions', jurisdiction: 'Municipal', department: 'Planning', effectiveDate: '2010-03-15', lastAmended: '2025-10-05', status: 'Active', citation: 'MCC §12.34', category: 'zoning', details: 'Maximum building height 35 feet in residential zones' },
            { id: 27, title: 'Building Code §45.67 - Permit Requirements', jurisdiction: 'Municipal', department: 'Building', effectiveDate: '2008-06-01', lastAmended: '2023-12-10', status: 'Active', citation: 'MCC §45.67', category: 'safety', details: 'Permits required for structures >120 sq ft' },
            { id: 28, title: 'Business License Ordinance §23.45', jurisdiction: 'Municipal', department: 'Finance', effectiveDate: '2005-01-01', lastAmended: '2024-01-01', status: 'Active', citation: 'MCC §23.45', category: 'business' },
            { id: 29, title: 'Noise Control Ordinance §67.89', jurisdiction: 'Municipal', department: 'Police', effectiveDate: '2012-08-20', lastAmended: '2023-06-15', status: 'Active', citation: 'MCC §67.89', category: 'safety', details: 'Quiet hours 10 PM - 7 AM' },
            { id: 30, title: 'Sign Regulations §34.56', jurisdiction: 'Municipal', department: 'Planning', effectiveDate: '2015-04-01', lastAmended: '2023-11-20', status: 'Active', citation: 'MCC §34.56', category: 'zoning', details: 'Maximum sign area 32 sq ft' },
            { id: 31, title: 'Parking Regulations §78.90', jurisdiction: 'Municipal', department: 'Planning', effectiveDate: '2010-05-15', lastAmended: '2024-02-28', status: 'Active', citation: 'MCC §78.90', category: 'zoning', details: 'Minimum parking spaces per use' },
            { id: 32, title: 'Tree Protection Ordinance §56.78', jurisdiction: 'Municipal', department: 'Parks', effectiveDate: '2018-09-10', lastAmended: '2023-08-05', status: 'Active', citation: 'MCC §56.78', category: 'environmental' },
            { id: 33, title: 'Home Occupation Permit §89.01', jurisdiction: 'Municipal', department: 'Planning', effectiveDate: '2013-02-20', lastAmended: '2023-10-12', status: 'Active', citation: 'MCC §89.01', category: 'business' },
            { id: 34, title: 'Fence Ordinance §12.23', jurisdiction: 'Municipal', department: 'Building', effectiveDate: '2011-07-01', lastAmended: '2023-09-18', status: 'Active', citation: 'MCC §12.23', category: 'zoning', details: 'Maximum height 6 ft front, 8 ft rear' },
            { id: 35, title: 'Sidewalk Café Permit §45.67', jurisdiction: 'Municipal', department: 'Health', effectiveDate: '2016-05-10', lastAmended: '2024-01-05', status: 'Active', citation: 'MCC §45.67', category: 'business' },
            { id: 36, title: 'Special Event Permit §23.78', jurisdiction: 'Municipal', department: 'Recreation', effectiveDate: '2014-03-25', lastAmended: '2023-07-22', status: 'Active', citation: 'MCC §23.78', category: 'events' },
            { id: 37, title: 'Alcoholic Beverage License §67.12', jurisdiction: 'Municipal', department: 'Licensing', effectiveDate: '2009-11-15', lastAmended: '2023-12-01', status: 'Active', citation: 'MCC §67.12', category: 'business' },
            { id: 38, title: 'Rental Property Registration §34.89', jurisdiction: 'Municipal', department: 'Housing', effectiveDate: '2017-06-01', lastAmended: '2024-01-15', status: 'Active', citation: 'MCC §34.89', category: 'housing' },
            { id: 39, title: 'Stormwater Management §90.12', jurisdiction: 'Municipal', department: 'Public Works', effectiveDate: '2019-04-10', lastAmended: '2023-11-30', status: 'Active', citation: 'MCC §90.12', category: 'environmental' },
            { id: 40, title: 'Historic Preservation §56.34', jurisdiction: 'Municipal', department: 'Planning', effectiveDate: '2020-08-05', lastAmended: '2023-10-20', status: 'Active', citation: 'MCC §56.34', category: 'preservation' }
        ];

        // Sample query responses
        const sampleResponses = {
            'parking ada': {
                confidence: 87,
                status: 'needs-review',
                analysis: `The proposed parking ordinance shows partial compliance with ADA Standards (2010). Accessible parking space requirements meet federal standards (§208.2), but van-accessible space width (96 inches) falls short of required 132 inches. Signage specifications comply with §502.6.`,
                plainEnglish: `Your parking plan mostly follows ADA rules, but van-accessible spaces need to be wider. Regular accessible spaces are correct, but you need to add 36 more inches to the van spaces. The signs meet requirements.`,
                citations: ['28 CFR §35.151', 'ADA Standards §208.2', 'ADA Standards §502.3', 'MCC §78.90'],
                recommendations: [
                    'Increase van-accessible space width from 96" to 132"',
                    'Ensure 5-foot access aisle adjacent to each accessible space',
                    'Verify signage height and reflectivity comply with §502.6',
                    'Update site plan drawings to reflect changes'
                ],
                relatedPolicies: ['Municipal Parking Code §78.90', 'State Accessibility Standards', 'Federal ADA §208']
            },
            'building height': {
                confidence: 94,
                status: 'compliant',
                analysis: `Found 8 regulations governing building heights. Municipal Zoning Ordinance §12.34 sets residential height limit at 35 feet. Downtown Overlay §12.45 permits 65 feet for commercial buildings. State Building Code Chapter 34 addresses structural requirements for tall buildings. FAA Part 77 applies near airports. No conflicts detected between regulations.`,
                plainEnglish: `There are clear height rules for buildings. Homes can be up to 35 feet tall. Downtown commercial buildings can go up to 65 feet. If you're near an airport, FAA rules also apply. All these rules work together without conflicts.`,
                citations: ['MCC §12.34', 'MCC §12.45', 'SBC Ch. 34', 'FAA Part 77'],
                recommendations: [
                    'Verify exact zone classification for property',
                    'Check distance from airport if within 10 miles',
                    'Review State structural requirements for buildings over 3 stories',
                    'Consult planning department for overlay district applicability'
                ],
                relatedPolicies: ['Zoning Map', 'Downtown Overlay District', 'Airport Height Zoning']
            },
            'work from home': {
                confidence: 92,
                status: 'compliant',
                analysis: `Remote work is permitted under Personnel Policy §4.56, subject to department head approval and completion of ergonomic assessment. OSHA regulations require employers to ensure home workspaces meet safety standards. Municipal union contract Article 12.3 addresses telework equipment reimbursement up to $500 annually.`,
                plainEnglish: `Employees can work from home with their manager's approval. The city must make sure the home workspace is safe and ergonomic. Employees can get up to $500 per year for equipment like chairs and monitors. Some training is required before starting.`,
                citations: ['Personnel Policy §4.56', 'OSHA Guidelines 3990', 'Collective Bargaining Agreement Art. 12.3'],
                recommendations: [
                    'Complete manager approval form (Form HR-205)',
                    'Schedule ergonomic assessment within 30 days',
                    'Submit equipment inventory to IT department',
                    'Complete data security training module online'
                ],
                relatedPolicies: ['IT Security Policy', 'Workers Compensation Coverage', 'Equipment Policy']
            }
        };

        // Recent queries storage
        let recentQueries = [
            'Does this policy comply with ADA requirements?',
            'Find all regulations about building heights',
            'Can employees work from home under current policies?',
            'What are OSHA requirements for new construction?',
            'Environmental review requirements for development'
        ];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            populatePolicyTable();
            updateRecentQueries();
        });

        function populatePolicyTable() {
            const tbody = document.getElementById('policyTableBody');
            tbody.innerHTML = '';

            policyDatabase.forEach(policy => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${policy.title}</td>
                    <td><span class="px-2 py-1 rounded text-xs ${getJurisdictionClass(policy.jurisdiction)}">${policy.jurisdiction}</span></td>
                    <td>${policy.department}</td>
                    <td>${new Date(policy.effectiveDate).toLocaleDateString()}</td>
                    <td><span class="px-2 py-1 rounded text-xs status-compliant">Active</span></td>
                    <td>
                        <button onclick="viewPolicy(${policy.id})" class="text-blue-400 hover:text-blue-300 mr-2" title="View">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button onclick="analyzeSpecificPolicy(${policy.id})" class="text-purple-400 hover:text-purple-300 mr-2" title="Analyze">
                            <i class="fas fa-search-plus"></i>
                        </button>
                        <button onclick="comparePolicy(${policy.id})" class="text-green-400 hover:text-green-300" title="Compare">
                            <i class="fas fa-code-compare"></i>
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function getJurisdictionClass(jurisdiction) {
            switch(jurisdiction) {
                case 'Federal': return 'bg-purple-500/20 text-purple-300 border border-purple-500/40';
                case 'State': return 'bg-green-500/20 text-green-300 border border-green-500/40';
                case 'Municipal': return 'bg-blue-500/20 text-blue-300 border border-blue-500/40';
                default: return '';
            }
        }

        function updateRecentQueries() {
            const container = document.getElementById('recentQueries');
            container.innerHTML = recentQueries.slice(0, 5).map((query, index) => `
                <div class="flex items-center justify-between p-2 rounded hover:bg-white/10 cursor-pointer transition-all" onclick="runRecentQuery('${query}')">
                    <span class="text-white/70 text-sm flex-1">${query}</span>
                    <button class="text-blue-400 hover:text-blue-300 text-xs">
                        <i class="fas fa-redo"></i>
                    </button>
                </div>
            `).join('');
        }

        function analyzePolicy() {
            const query = document.getElementById('policyQuery').value.trim();
            if (!query) return;

            // Add to recent queries
            if (!recentQueries.includes(query)) {
                recentQueries.unshift(query);
                if (recentQueries.length > 5) recentQueries.pop();
                updateRecentQueries();
            }

            // Show analysis panel
            const panel = document.getElementById('analysisPanel');
            panel.style.display = 'block';
            panel.classList.add('fade-in');

            // Determine response based on query keywords
            let response;
            const lowerQuery = query.toLowerCase();

            if (lowerQuery.includes('parking') && lowerQuery.includes('ada')) {
                response = sampleResponses['parking ada'];
            } else if (lowerQuery.includes('height') || lowerQuery.includes('building')) {
                response = sampleResponses['building height'];
            } else if (lowerQuery.includes('work from home') || lowerQuery.includes('remote') || lowerQuery.includes('telework')) {
                response = sampleResponses['work from home'];
            } else {
                // Generic response
                response = {
                    confidence: 85,
                    status: 'compliant',
                    analysis: `Based on analysis of relevant regulations, your query appears to align with current policies. However, specific implementation details should be reviewed by the legal department.`,
                    plainEnglish: `Your question relates to established regulations that are generally permissive. For specific guidance tailored to your situation, please consult with the appropriate department.`,
                    citations: ['Various Municipal Codes', 'State Regulations', 'Federal Guidelines'],
                    recommendations: [
                        'Review specific department policies',
                        'Consult with legal counsel for detailed interpretation',
                        'Check for recent regulatory updates',
                        'Document compliance procedures'
                    ],
                    relatedPolicies: ['See regulatory database for related policies']
                };
            }

            displayAnalysis(response, query);
        }

        function displayAnalysis(response, query) {
            const content = document.getElementById('analysisContent');

            const confidenceClass = response.confidence >= 90 ? 'confidence-high' :
                                   response.confidence >= 70 ? 'confidence-medium' : 'confidence-low';

            const statusClass = `status-${response.status}`;
            const statusText = response.status.split('-').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' ');
            const statusIcon = response.status === 'compliant' ? '✓' :
                             response.status === 'needs-review' ? '⚠️' :
                             response.status === 'non-compliant' ? '✗' : '?';

            content.innerHTML = `
                <div class="mb-4">
                    <div class="text-white/60 text-sm mb-2">Query:</div>
                    <div class="glass-dark p-3 rounded-lg text-white">${query}</div>
                </div>

                <div class="mb-4">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-white/60 text-sm">AI Confidence</span>
                        <span class="text-white font-bold">${response.confidence}%</span>
                    </div>
                    <div class="confidence-meter">
                        <div class="confidence-fill ${confidenceClass}" style="width: ${response.confidence}%"></div>
                    </div>
                </div>

                <div class="mb-4">
                    <div class="text-white/60 text-sm mb-2">Compliance Status</div>
                    <span class="px-4 py-2 rounded-lg ${statusClass} font-semibold inline-block">
                        ${statusIcon} ${statusText}
                    </span>
                </div>

                <div class="mb-4">
                    <div class="text-white/60 text-sm mb-2">Professional Analysis</div>
                    <div class="glass-dark p-4 rounded-lg text-white/90 leading-relaxed">
                        ${response.analysis}
                    </div>
                </div>

                <details class="mb-4">
                    <summary class="cursor-pointer text-white font-semibold mb-2 hover:text-blue-400">
                        <i class="fas fa-chevron-right mr-2"></i>Plain English Summary
                    </summary>
                    <div class="glass-dark p-4 rounded-lg text-white/90 leading-relaxed ml-6">
                        ${response.plainEnglish}
                    </div>
                </details>

                <div class="mb-4">
                    <div class="text-white/60 text-sm mb-2">Relevant Citations</div>
                    <div class="flex flex-wrap gap-2">
                        ${response.citations.map(cit => {
                            const citClass = cit.includes('CFR') || cit.includes('U.S.C') ? 'citation-federal' :
                                           cit.includes('SBC') || cit.includes('Ch.') ? 'citation-state' : 'citation-municipal';
                            return `<span class="${citClass}" onclick="showCitation('${cit}')">${cit}</span>`;
                        }).join(' ')}
                    </div>
                </div>

                <div class="mb-4">
                    <div class="text-white/60 text-sm mb-2">Recommendations</div>
                    <div class="glass-dark p-4 rounded-lg">
                        <ul class="space-y-2">
                            ${response.recommendations.map(rec => `
                                <li class="text-white/90 flex items-start">
                                    <i class="fas fa-check-circle text-green-400 mr-2 mt-1"></i>
                                    <span>${rec}</span>
                                </li>
                            `).join('')}
                        </ul>
                    </div>
                </div>

                <div class="mb-4">
                    <div class="text-white/60 text-sm mb-2">Related Policies</div>
                    <div class="flex flex-wrap gap-2">
                        ${response.relatedPolicies.map(pol => `
                            <span class="px-3 py-1 rounded-lg bg-blue-500/20 text-blue-300 text-sm border border-blue-500/40 cursor-pointer hover:bg-blue-500/30">
                                ${pol}
                            </span>
                        `).join('')}
                    </div>
                </div>

                <div class="flex gap-3 mt-6">
                    <button onclick="exportAnalysis()" class="px-4 py-2 rounded-lg bg-green-600 hover:bg-green-700 text-white font-semibold transition-all flex items-center">
                        <i class="fas fa-file-pdf mr-2"></i>Export PDF
                    </button>
                    <button onclick="emailAnalysis()" class="px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-semibold transition-all flex items-center">
                        <i class="fas fa-envelope mr-2"></i>Email Summary
                    </button>
                    <input
                        type="text"
                        placeholder="Ask a follow-up question..."
                        class="flex-1 px-4 py-2 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/50 focus:outline-none focus:border-purple-500"
                    >
                </div>
            `;
        }

        function showCitation(citation) {
            const modal = document.getElementById('citationModal');
            const content = document.getElementById('citationContent');

            // Mock citation details
            content.innerHTML = `
                <div class="mb-4">
                    <h3 class="text-xl font-bold text-white mb-2">${citation}</h3>
                    <div class="text-white/60 text-sm">Full Legal Text</div>
                </div>

                <div class="glass-dark p-6 rounded-lg mb-4">
                    <p class="text-white/90 leading-relaxed mb-4">
                        [This would display the full text of the regulation from the legal database]
                    </p>
                    <p class="text-white/90 leading-relaxed">
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                    </p>
                </div>

                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div class="glass-dark p-4 rounded-lg">
                        <div class="text-white/60 text-sm mb-1">Effective Date</div>
                        <div class="text-white font-semibold">January 1, 2010</div>
                    </div>
                    <div class="glass-dark p-4 rounded-lg">
                        <div class="text-white/60 text-sm mb-1">Last Amended</div>
                        <div class="text-white font-semibold">March 15, 2023</div>
                    </div>
                </div>

                <div class="flex gap-3">
                    <button onclick="copyCitation('${citation}')" class="px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-semibold transition-all">
                        <i class="fas fa-copy mr-2"></i>Copy Citation
                    </button>
                    <button class="px-4 py-2 rounded-lg bg-purple-600 hover:bg-purple-700 text-white font-semibold transition-all">
                        <i class="fas fa-external-link-alt mr-2"></i>View Full Document
                    </button>
                </div>
            `;

            modal.classList.add('active');
        }

        function closeCitationModal() {
            document.getElementById('citationModal').classList.remove('active');
        }

        function closeAnalysis() {
            document.getElementById('analysisPanel').style.display = 'none';
        }

        function runRecentQuery(query) {
            document.getElementById('policyQuery').value = query;
            analyzePolicy();
        }

        function filterTable() {
            const searchTerm = document.getElementById('tableSearch').value.toLowerCase();
            const filter = document.getElementById('tableFilter').value;
            const rows = document.querySelectorAll('#policyTableBody tr');

            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                const jurisdiction = row.children[1].textContent;

                const matchesSearch = text.includes(searchTerm);
                const matchesFilter = !filter || jurisdiction === filter;

                row.style.display = (matchesSearch && matchesFilter) ? '' : 'none';
            });
        }

        function toggleVoiceInput() {
            alert('Voice input simulation: "Does this policy comply with ADA requirements?"');
            document.getElementById('policyQuery').value = 'Does this policy comply with ADA requirements?';
        }

        function showNewAnalysis() {
            document.getElementById('policyQuery').focus();
        }

        function showPolicySearch() {
            document.getElementById('tableSearch').focus();
        }

        function showConflictScan() {
            const detector = document.getElementById('conflictDetector');
            detector.style.display = 'block';
            detector.classList.add('fade-in');

            const content = document.getElementById('conflictContent');
            content.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                    <div class="glass-dark p-4 rounded-lg conflict-critical">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-red-400 font-bold">Critical Conflicts</span>
                            <span class="text-2xl font-bold text-red-400">2</span>
                        </div>
                        <div class="text-white/70 text-sm">Require immediate resolution</div>
                    </div>
                    <div class="glass-dark p-4 rounded-lg conflict-moderate">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-yellow-400 font-bold">Moderate Conflicts</span>
                            <span class="text-2xl font-bold text-yellow-400">5</span>
                        </div>
                        <div class="text-white/70 text-sm">Should be reviewed soon</div>
                    </div>
                    <div class="glass-dark p-4 rounded-lg conflict-minor">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-green-400 font-bold">Minor Conflicts</span>
                            <span class="text-2xl font-bold text-green-400">8</span>
                        </div>
                        <div class="text-white/70 text-sm">Low priority items</div>
                    </div>
                </div>

                <div class="space-y-4">
                    <div class="glass-dark p-4 rounded-lg conflict-critical">
                        <div class="flex items-center justify-between mb-2">
                            <h4 class="text-white font-semibold">Parking Space Width Discrepancy</h4>
                            <span class="px-3 py-1 rounded-full bg-red-500/20 text-red-300 text-xs border border-red-500/40">Critical</span>
                        </div>
                        <div class="text-white/80 text-sm mb-3">
                            Municipal Code §78.90 specifies 96-inch van-accessible spaces, conflicting with ADA Standards §502.3 requiring 132 inches.
                        </div>
                        <div class="grid grid-cols-2 gap-3">
                            <div class="bg-blue-500/10 p-3 rounded border border-blue-500/30">
                                <div class="text-blue-400 text-xs mb-1">Municipal Code</div>
                                <div class="text-white text-sm">96 inches wide</div>
                            </div>
                            <div class="bg-purple-500/10 p-3 rounded border border-purple-500/30">
                                <div class="text-purple-400 text-xs mb-1">Federal ADA</div>
                                <div class="text-white text-sm">132 inches wide</div>
                            </div>
                        </div>
                        <div class="mt-3 flex gap-2">
                            <button class="px-3 py-1 rounded bg-green-600 hover:bg-green-700 text-white text-sm">
                                <i class="fas fa-check mr-1"></i>View Resolution
                            </button>
                            <button class="px-3 py-1 rounded bg-blue-600 hover:bg-blue-700 text-white text-sm">
                                <i class="fas fa-code-compare mr-1"></i>Compare Policies
                            </button>
                        </div>
                    </div>

                    <div class="glass-dark p-4 rounded-lg conflict-moderate">
                        <div class="flex items-center justify-between mb-2">
                            <h4 class="text-white font-semibold">Building Height Measurement Baseline</h4>
                            <span class="px-3 py-1 rounded-full bg-yellow-500/20 text-yellow-300 text-xs border border-yellow-500/40">Moderate</span>
                        </div>
                        <div class="text-white/80 text-sm mb-3">
                            State Building Code measures from average grade, while Municipal Zoning §12.34 measures from lowest point.
                        </div>
                        <div class="mt-3 flex gap-2">
                            <button class="px-3 py-1 rounded bg-green-600 hover:bg-green-700 text-white text-sm">
                                <i class="fas fa-lightbulb mr-1"></i>View Recommendation
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function exportReport() {
            alert('Exporting comprehensive policy analysis report...\n\nMOCK: This would generate a PDF report with all current analysis, compliance scores, and regulatory information.');
        }

        function exportAnalysis() {
            alert('Exporting analysis as PDF legal memo...\n\nMOCK: This would create a formatted PDF with the complete analysis.');
        }

        function emailAnalysis() {
            alert('Email summary functionality\n\nMOCK: This would send the analysis summary to specified recipients.');
        }

        function copyCitation(citation) {
            navigator.clipboard.writeText(citation);
            alert('Citation copied to clipboard: ' + citation);
        }

        function viewPolicy(id) {
            const policy = policyDatabase.find(p => p.id === id);
            showCitation(policy.citation);
        }

        function analyzeSpecificPolicy(id) {
            const policy = policyDatabase.find(p => p.id === id);
            document.getElementById('policyQuery').value = `Analyze ${policy.title}`;
            analyzePolicy();
        }

        function comparePolicy(id) {
            alert('Policy comparison tool\n\nMOCK: This would open a side-by-side comparison interface.');
        }

        console.log('Policy Intelligence Center initialized');
        console.log('Mock database loaded with', policyDatabase.length, 'regulations');
    </script>
</body>
</html>
